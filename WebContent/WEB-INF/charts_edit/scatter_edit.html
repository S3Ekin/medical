<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head>
    <title>图表创建编辑</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="stylesheet" type="text/css" href="../../resources/images/style.css" />
	<link rel="stylesheet" type="text/css" href="../../resources/css/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="../../resources/css/easyui.css"/>
	<link rel="stylesheet" href="chat_edit.css">
	
</head>
<body>
<div class="mr15">
    <div style="width:100%;margin-top:5px;height:35px;z-index:9999;">
       	<span class="tab_title">图表创建编辑</span>
		<hr style="background-color:#DBDBDB;height:2px;border:none;margin-top:10px;">
    </div>
	<div class="container-fluid" style="width:90%;min-width:900px;padding: 20px 0 0 0" >
		<div class="row">
			<div  class="col-xs-2 topic">名称:</div>
			<div class="col-xs-9">
				<input type="text" class="clo-xs-9" id="name" value="漏斗图" style="width:100%;max-width: 400px ;height:30px">
			</div>
		</div>
		<div class="row">
			<div class="col-xs-2 topic">数据源类型:</div>
			<div class="col-xs-4">
				<input type="radio" name="dataType" value="1" checked="checked"><span>指标数据</span>
				<input type="radio" name="dataType" value="0"  style="margin-left: 20px"><span>上传数据</span>
			</div>
		</div>
		<div class="row">
			<div class="col-xs-2 topic">数据源:</div>
			<div class="col-xs-1" >
				<button class="btn btn-primary sourceBtn">选择(<span>多选</span>)</button>
			</div>
		</div>
		<div class="zb">
			<div class="row">
			<div class="col-xs-2 topic" style="padding-left: 0">指标公共维度:</div>
			<div class="col-xs-7 combo-data" >
				<span class="combo-title">频率:</span>
				<div id="rotate"></div>
				<div class="data-combo-year"></div>
				<div> <div class="data-combo"></div>
				</div>
				<span style="color:darkgreen">———</span>
				<div class="data-combo-year"></div>
				<div> <div class="data-combo"></div>
				</div>
			</div>
			<div class="col-xs-3 no-padding">
				<span class="combo-title">科室:</span><div id="organization"></div>
			</div>
		</div>
			<div class="newAdd"></div>
			<div class="row">
				<div class="col-xs-2 topic">横轴维度:</div>
				<div class="col-xs-3 ">
					<div class="wd-combo"></div>
				 </div>
			</div>
			<div class="row">
				<div class="col-xs-2 topic">纵轴维度:</div>
				<div class="col-xs-4">
					<div class="wd-combo"></div>
				</div>
			</div>
		</div>
		<div class="upload">
			<div class="row">
				<div class="col-xs-2 topic">数据名称:</div>
				<div class="col-xs-10 zb-name"></div>
			</div>
			<div class="row">
				<div class="col-xs-2 topic">横轴字段:</div>
				<div class="col-xs-4">
					<div class="field-combo"></div>
				</div>
			</div>
			<div class="row">
				<div class="col-xs-2 topic">纵轴字段1:</div>
				<div class="col-xs-4">
					<div class="field-combo"></div>
				</div>
				<div class="col-xs-2" >
					<button type="button" class="btn btn-primary " id="field-btn">添加</button>
				</div>
			</div>
			<div class="add-col-field"></div>
		</div>
		<div class="table">
			<div class="row">
				<div class="col-xs-2 topic">图形标题:</div>
				<div class="col-xs-4">
					<input type="text" style="height: 30px;width: 100%" value="漏斗图(对比)" id="title">
				</div>
			</div>
			<div class="row ">
				<div class="col-xs-2 topic">
					<button type="button" class="btn btn-primary " id="preChat">预览</button>
				</div>
			</div>
			<div class="pre">
				<div id="chat" style="width:760px;height:350px"></div>
		</div>
	</div>
</div>

<!-- 数据源 -->
<div id="sourceSelected">
	<div class="content" >
		<ul id="sourceTree">
		</ul>
	</div>
	<div class="footer">
		<button type="button" class="btn btn-primary "   id="select">确定</button>
				<button type="button" class="btn btn-primary" id="cancel">取消</button>
	</div>
</div>
<!-- alert共用模态框 -->
<div class="modal fade" id="modal_alert" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-backdrop="false">
	<div class="modal-dialog" style="width:300px;margin:65px auto;" >
		<div class="modal-content">
			<div class="modal-header" id="modal_title">
				<button type="button" class="close" data-dismiss="modal">
					<span class="is_true" aria-hidden="true" style="position:relative;top:-8px;font-size:25px;">&times;</span><span class="sr-only">Close</span>
				</button>

			</div>
			<div class="modal-body">
				<div style="height:65px;text-align: center;font-size: 18px" id="txt_insert">
					<span >确定删除吗?</span>
				</div>
			</div>
			<div class="modal-footer" style="text-align:center;">
				<button type="button" class="btn btn-primary " data-dismiss="modal" id="is_true">确定</button>
				<button type="button" class="btn btn-primary is_false" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="../../resources/jQuery/jquery.min.js"></script>
<script type="text/javascript" src="../../resources/js/bootstrap.js"></script>
<script src="../../resources/echarts/echarts.js"></script>
<script src="../../resources/jQuery/jquery.easyui.min.js"></script>
<script src="chat_edit.js"></script>
<script>
	/*chats加载*/
    $("#preChat").click(function () {
        if(is_zb){
        }else{
        }
        var title=$("#title").val();
        $(".pre").show();
        var myChart = echarts.init($('#chat').get(0));
        var pieoption ={
            title: {
                text: title,
                subtext: '纯属虚构',
                left: 'left',
                top: 'bottom'
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                show: true,
                orient: 'vertical',
                top: 'center',
                feature: {
                    dataView: {readOnly: false},
                    restore: {},
                    saveAsImage: {}
                }
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                data: ['北京','上海','广州','深圳','南京']
            },
            calculable: true,
            series: [
                {
                    name: '漏斗图',
                    type: 'funnel',
                    width: '40%',
                    height: '45%',
                    left: '5%',
                    top: '50%',
                    funnelAlign: 'right',

                    center: ['25%', '25%'],  // for pie

                    data:[
                        {value:60, name:'北京'},
                        {value:30, name:'上海'},
                        {value:10, name:'广州'},
                        {value:80, name:'深圳'},
                        {value:100, name:'南京'}
                    ]
                },
                {
                    name: '金字塔',
                    type:'funnel',
                    width: '40%',
                    height: '45%',
                    left: '5%',
                    top: '5%',
                    sort: 'ascending',
                    funnelAlign: 'right',

                    center: ['25%', '75%'],  // for pie

                    data:[
                        {value:60, name:'北京'},
                        {value:30, name:'上海'},
                        {value:10, name:'广州'},
                        {value:80, name:'深圳'},
                        {value:100, name:'南京'}
                    ]
                },
                {
                    name:'漏斗图',
                    type:'funnel',
                    width: '40%',
                    height: '45%',
                    left: '55%',
                    top: '5%',
                    funnelAlign: 'left',

                    center: ['75%', '25%'],  // for pie

                    data: [
                        {value:60, name:'北京'},
                        {value:30, name:'上海'},
                        {value:10, name:'广州'},
                        {value:80, name:'深圳'},
                        {value:100, name:'南京'}
                    ]
                },
                {
                    name: '金字塔',
                    type:'funnel',
                    width: '40%',
                    height: '45%',
                    left: '55%',
                    top: '50%',
                    sort: 'ascending',
                    funnelAlign: 'left',

                    center: ['75%', '75%'],  // for pie

                    data: [
                        {value:60, name:'北京'},
                        {value:30, name:'上海'},
                        {value:10, name:'广州'},
                        {value:80, name:'深圳'},
                        {value:100, name:'南京'}
                    ]
                }
            ]
        } ;
        myChart.setOption(pieoption);
    })
</script>
<div class="clr"></div>
</body>
</html>
