<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>line_chart</title>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="echarts/echarts.js"></script>
</head>
<body>
	<div id="p2_div_chart" style="width:100%;height: 250px"></div>
	<script type="text/javascript">
	$('#p2_div_chart').width($('#p2_div_chart').parent().width());
	var xAxisData = [];
	var data1 = [];
	var data2 = [];
	for (var i = 0; i < 100; i++) {
	    xAxisData.push('第' + i + '天');
	    data1.push((Math.sin(i / 5) * (i / 5 -10) + i / 6) * 5);
	    data2.push((Math.cos(i / 5) * (i / 5 -10) + i / 6) * 5);
	}
	lineoption = {
	    title: {
	        text: '内外科3个月的收入比较'
	    },
	    legend: {
	        data: ['外科手术收入', '内科处方收入'],
	        top: 'bottom'
//	        top: 'top'
	    },
	    toolbox: {
	        // y: 'bottom',
	        feature: {
	            magicType: {
	                type: ['stack', 'tiled']//平铺和堆叠
	            },
	            dataView: {
                    optionToContent: function(opt) {
                        console.log("opt");
                        var axisData = opt.xAxis[0].data;
                        var series = opt.series;
                        var table = '<table style="width:100%;text-align:center"><tbody><tr>'
                            + '<td>时间</td>'
                            + '<td>' + series[0].name + '</td>'
                            + '<td>' + series[1].name + '</td>'
                            + '</tr>';
                        for (var i = 0, l = axisData.length; i < l; i++) {
                            table += '<tr>'
                                + '<td>' + axisData[i] + '</td>'
                                + '<td>' + series[0].data[i] + '</td>'
                                + '<td>' + series[1].data[i] + '</td>'
                                + '</tr>';
                        }
                        table += '</tbody></table>';
                        return table;
                    }
				},
	            saveAsImage: {
	                pixelRatio: 2
	            }
	        }
	    },
	    tooltip: {},
	    xAxis: {
	        data: xAxisData,
	        silent: false,
	        splitLine: {
	            show: true
	        }
	    },
	    yAxis: {
	    	axisLabel: {formatter: '{value} 元'},
	    },
	    series: [{
	        name: '外科手术收入',
	        type: 'bar',
	        data: data1,
	        animationDelay: function (idx) {
	            return idx * 10;
	        }
	    }, {
	        name: '内科处方收入',
	        type: 'bar',
	        data: data2,
	        animationDelay: function (idx) {
	            return idx * 10 + 100;
	        }
	    }],
	    animationEasing: 'elasticOut',
	    animationDelayUpdate: function (idx) {
	        return idx * 5;
	    }
	};
		var myChart = echarts.init($('#p2_div_chart').get(0));
		myChart.setOption(lineoption);
		window.onresize = myChart.resize;//窗口自适应
	</script>
</body>
</html>